{"numFailedTestSuites":1,"numFailedTests":1,"numPassedTestSuites":0,"numPassedTests":11,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":1,"numTotalTests":12,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1757512471232,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["PaymentsService","create"],"duration":167,"failureDetails":[],"failureMessages":[],"fullName":"PaymentsService create creates full payment, updates invoice to PAID, logs history, and sends email when prefs enabled","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"creates full payment, updates invoice to PAID, logs history, and sends email when prefs enabled"},{"ancestorTitles":["PaymentsService","create"],"duration":21,"failureDetails":[],"failureMessages":[],"fullName":"PaymentsService create creates partial payment, updates invoice to PARTIALLY_PAID, logs history, and does not send email if emailNotificationsEnabled is false","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"creates partial payment, updates invoice to PARTIALLY_PAID, logs history, and does not send email if emailNotificationsEnabled is false"},{"ancestorTitles":["PaymentsService","create"],"duration":17,"failureDetails":[],"failureMessages":[],"fullName":"PaymentsService create does not send email if emailNotifyPaymentReceived is false","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"does not send email if emailNotifyPaymentReceived is false"},{"ancestorTitles":["PaymentsService","create"],"duration":581,"failureDetails":[],"failureMessages":[],"fullName":"PaymentsService create handles email sending failure gracefully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"handles email sending failure gracefully"},{"ancestorTitles":["PaymentsService","create"],"duration":14,"failureDetails":[],"failureMessages":[],"fullName":"PaymentsService create throws NotFoundException when invoice not found","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"throws NotFoundException when invoice not found"},{"ancestorTitles":["PaymentsService","create"],"duration":14,"failureDetails":[],"failureMessages":[],"fullName":"PaymentsService create throws BadRequestException when overpaying","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"throws BadRequestException when overpaying"},{"ancestorTitles":["PaymentsService","processPayment"],"duration":22,"failureDetails":[],"failureMessages":[],"fullName":"PaymentsService processPayment processes payment successfully and sends email when prefs enabled","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"processes payment successfully and sends email when prefs enabled"},{"ancestorTitles":["PaymentsService","processPayment"],"duration":13,"failureDetails":[],"failureMessages":[],"fullName":"PaymentsService processPayment processes payment successfully but does not send email when prefs disabled","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"processes payment successfully but does not send email when prefs disabled"},{"ancestorTitles":["PaymentsService","processPayment"],"duration":28,"failureDetails":[],"failureMessages":[],"fullName":"PaymentsService processPayment processes payment successfully but does not send email when emailNotifyPaymentReceived is false","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"processes payment successfully but does not send email when emailNotifyPaymentReceived is false"},{"ancestorTitles":["PaymentsService","processPayment"],"duration":349,"failureDetails":[],"failureMessages":[],"fullName":"PaymentsService processPayment handles email sending failure gracefully on success path","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"handles email sending failure gracefully on success path"},{"ancestorTitles":["PaymentsService","processPayment"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"PaymentsService processPayment throws NotFoundException when invoice not found","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"throws NotFoundException when invoice not found"},{"ancestorTitles":["PaymentsService","processPayment"],"duration":35,"failureDetails":[{"response":{"message":"Payment processing failed. Please try again.","error":"Bad Request","statusCode":400},"status":400,"options":{},"message":"Payment processing failed. Please try again.","name":"BadRequestException"}],"failureMessages":["BadRequestException: Payment processing failed. Please try again.\n    at PaymentsService.processPayment (D:\\Programming and Development\\Nextjs, Nestjs and Prisma\\13.Invoicy\\backend\\src\\modules\\payments\\payments.service.ts:174:13)"],"fullName":"PaymentsService processPayment creates failed payment and throws BadRequestException when processing fails","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"failed","title":"creates failed payment and throws BadRequestException when processing fails"}],"endTime":1757512517138,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mPaymentsService › processPayment › creates failed payment and throws BadRequestException when processing fails\u001b[39m\u001b[22m\n\n    BadRequestException: Payment processing failed. Please try again.\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 172 |\u001b[39m       })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 173 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 174 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mBadRequestException\u001b[39m(\u001b[32m'Payment processing failed. Please try again.'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 175 |\u001b[39m     }\u001b[22m\n\u001b[2m     \u001b[90m 176 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 177 |\u001b[39m     \u001b[90m// Create successful payment\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat PaymentsService.processPayment (\u001b[22m\u001b[2mmodules/payments/payments.service.ts\u001b[2m:174:13)\u001b[22m\u001b[2m\u001b[22m\n","name":"D:\\Programming and Development\\Nextjs, Nestjs and Prisma\\13.Invoicy\\backend\\src\\modules\\payments\\payments.service.spec.ts","startTime":1757512474168,"status":"failed","summary":""}],"wasInterrupted":false}
